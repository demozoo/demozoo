{% load ui_tags %}

<section class="panel editable_chunk credits_panel {% if not credits %}hidden{% endif %} {% if can_edit %}edit_toggle {% if editing_credits %}editing{% endif %}{% endif %}" id="credits_panel">
    <header class="panel__header">
        <h3 class="panel__title">Credits</h3>
    </header>
    <div class="panel__content">
        <ul class="list -credits">
            {% regroup credits by nick as nick_list %}
            {% for nick_credits in nick_list %}
            <li class="list__item">
                {% include "shared/entity.html" with url=nick_credits.grouper.releaser.get_absolute_url type="scener" label=nick_credits.grouper list=nick_credits.list %}
                {% if can_edit %}
                {% url 'production_edit_credit' production.id nick_credits.grouper.id as production_edit_credit_url %}
                {% button href=production_edit_credit_url icon="edit" level="tertiary" title="Edit crdit" lightbox=True %}
                {% endif %}
            </li>
            {% endfor %}
        </ul>
        {% if can_edit %}
        {# todo: bring this into the new button fold #}
        {% url 'production_add_credit' production.id as production_add_credit_url %}
        {% button href=production_add_credit_url icon="add" label="Add credit" lightbox=True %}
        {% endif %}
    </div>
</section>
