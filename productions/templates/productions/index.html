{% extends "base.html" %}
{% load compress demoscene_tags ui_tags %}

{% block html_title %}Productions - Demozoo{% endblock %}

{% block base_main %}
    <header class="page__header">
        {% if site_is_writeable %}
            <div class="o-actions">
                {% url 'new_production' as new_production_url %}
                {% button href=new_production_url icon="add" lightbox=True label="New production" %}
            </div>
        {% endif %}
        <h1 class="page__title">Releases</h1>
    </header>

    <ul class="submenu">
        <li class="active"><a href="{% url 'productions' %}"><strong>Productions</strong></a></li>
        <li><a href="{% url 'musics' %}">Music</a></li>
        <li><a href="{% url 'graphics' %}">Graphics</a></li>
    </ul>

    <form action="{% url 'productions' %}" method="GET" class="production_listing_filters">
        <ul class="fields">
            {{ form.as_ul }}
        </ul>
        {% button label="Find productions" %}
    </form>

    {% include "shared/production_reorder_links.html" %}

    {% with production_page.object_list as productions %}
        {% if productions %}
            {% production_listing productions show_screenshots=1 show_prod_types=1 %}
        {% else %}
            <p style="text-align: center; font-style: italic;">No releases matching these criteria. Maybe you should make a demo about it...?</p>
        {% endif %}
    {% endwith %}
    
    {% with production_page as page %}
        {% include "shared/pagination_links.html" %}
    {% endwith %}
{% endblock %}
